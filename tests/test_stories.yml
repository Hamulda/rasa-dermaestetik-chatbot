version: "3.1"

stories:

- story: "Test 01: Základní úspěšná cesta formulářem"
  steps:
  - user: "Chci poradit"
    intent: ask_product_recommendation
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "mám suchou pleť"
    intent: inform
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "a řeším vrásky"
    intent: inform
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "to je vše, hledej"
    intent: trigger_recommendation
  - action: utter_now_searching
  - action: product_recommendation_form
  - active_loop: null
  - action: action_recommend_product

- story: "Test 02: Uživatel poskytne více informací najednou"
  steps:
  - user: "Hledám krém pro mastnou pleť od Medik8"
    intent: inform
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "to stačí"
    intent: trigger_recommendation
  - action: utter_now_searching
  - action: product_recommendation_form
  - active_loop: null
  - action: action_recommend_product

- story: "Test 03: Zrušení formuláře"
  steps:
  - user: "chci poradit"
    intent: ask_product_recommendation
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "stop"
    intent: stop_form
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_form_cancelled

- story: "Test 04: Pokročilé funkce po doporučení (paginace, porovnání, wishlist)"
  steps:
  - story: "Test 01: Základní úspěšná cesta formulářem" # Navážeme na příběh, kde se něco doporučilo
  - user: "ukaž další"
    intent: show_more
  - action: action_show_next_products
  - user: "porovnej první a druhý"
    intent: compare_products
  - action: action_compare_products
  - user: "přidej první do oblíbených"
    intent: add_to_wishlist
  - action: action_manage_wishlist
  - user: "ukaž mi můj seznam přání"
    intent: show_wishlist
  - action: action_manage_wishlist

- story: "Test 05: Správa filtrů"
  steps:
  - user: "mám suchou pleť"
    intent: inform
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "jaké mám teď filtry?"
    intent: show_current_filters
  - action: action_show_current_filters
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "resetovat hledání"
    intent: reset_filters
  - action: action_reset_filters
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "stop"
    intent: stop_form
  - action: action_deactivate_loop
  - active_loop: null

- story: "Test 06: Zpracování negací"
  steps:
  - user: "hledám něco na akné ale nechci krém"
    intent: inform
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "hledej"
    intent: trigger_recommendation
  - action: utter_now_searching
  - action: product_recommendation_form
  - active_loop: null
  - action: action_recommend_product

- story: "Test 07: Přerušení formuláře (digression)"
  steps:
  - user: "chci poradit"
    intent: ask_product_recommendation
  - action: product_recommendation_form
  - active_loop: product_recommendation_form
  - user: "jaké máte možnosti platby?"
    intent: faq/payment_options
  - action: utter_faq_payment_options
  - action: product_recommendation_form # Bot se správně vrátí k formuláři
  - active_loop: product_recommendation_form
